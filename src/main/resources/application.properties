# Server Configuration
server.port=8081

# Keycloak Base URL (Used for both OAuth2 client and Admin API)
keycloak.base-url=http://localhost:8080

# --- Spring Security - OAuth2 Client Configuration for 'plexus' Tenant ---
# This client (mi-spring-app-plexus) is used by your Spring Boot application
# to authenticate regular users for the 'plexus-realm' in Keycloak.
spring.security.oauth2.client.registration.plexus.client-id=mi-spring-app-plexus
spring.security.oauth2.client.registration.plexus.client-secret=APE7Jo7L22EY8yTKh50v6B82nQ8l3f24
spring.security.oauth2.client.registration.plexus.scope=openid,profile,email
spring.security.oauth2.client.registration.plexus.authorization-grant-type=authorization_code
# {baseUrl} will be replaced by your server.port URL, {action} by 'oauth2', {registrationId} by 'plexus'
spring.security.oauth2.client.registration.plexus.redirect-uri={baseUrl}/{action}/code/{registrationId}
spring.security.oauth2.client.registration.plexus.client-name=Plexus

# --- Spring Security - OAuth2 Provider Configuration for 'plexus' Tenant ---
# This defines how your Spring Boot application connects to the 'plexus-realm' as an OAuth2 provider.
spring.security.oauth2.client.provider.plexus.issuer-uri=http://localhost:8080/realms/plexus-realm
spring.security.oauth2.client.provider.plexus.user-name-attribute=preferred_username

# --- Keycloak Admin Client Configuration for 'plexus' Tenant Management ---
# IMPORTANT: These credentials (username/password) MUST belong to a user
# in the Keycloak 'master' realm that has 'realm-management' client roles
# assigned (e.g., manage-users, query-users, view-users).
# This is how your application gets administrative access to create users.
keycloak.admin.plexus.username=admin-plexus
keycloak.admin.plexus.password=password-plexus
keycloak.admin.plexus.client-id=admin-cli

# H2 Database Configuration (In-memory database for development)
spring.h2.console.enabled=true
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update

# Thymeleaf Configuration
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML

logging.level.org.springframework.security=DEBUG